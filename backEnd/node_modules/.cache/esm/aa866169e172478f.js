let Return,LogRepository;_e17‍.x([["default",()=>_e17‍.o]]);_e17‍.w("../Models/Return",[["default",["Return"],function(v){Return=v}]]);_e17‍.w("../repo/logRepo",[["default",["LogRepository"],function(v){LogRepository=v}]]);


class LogService
{
  async authorization(headers)
  {
    if (!headers.authorization)
      return new Return(401, 'No `authorization` sent!');

    return new Return();
  }

  async addLogSuccess(req, res, response)
  {
    LogRepository.addLog({
      metodo: req.method,
      url: req.url,
      parametro: req.params || req.body || {},
      retorno: response,
    });

    return res
      .status(response.statusCode)
      .json(response)
  }

  async addLogError(req, res, error)
  {
    let msg = `Ocorreu um erro ao processar os dados. TypeError: ${error.message}`;

    let stack = error.stack.split('\n');

    let response = new Return(400, msg, stack);

    LogRepository.addLog({
      metodo: req.method,
      url: req.url,
      parametro: req.params || req.body,
      retorno: response,
    });

    return res
      .status(response.statusCode)
      .json(response);
  }
}

_e17‍.d(new LogService());
